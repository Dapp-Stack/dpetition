{
  "contractName": "Controller",
  "abi": [
    {
      "constant": false,
      "inputs": [
        {
          "name": "_id",
          "type": "uint256"
        }
      ],
      "name": "withdraw",
      "outputs": [],
      "payable": true,
      "stateMutability": "payable",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [
        {
          "name": "_id",
          "type": "uint256"
        }
      ],
      "name": "sign",
      "outputs": [],
      "payable": true,
      "stateMutability": "payable",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [
        {
          "name": "_escrow",
          "type": "address"
        },
        {
          "name": "_petition",
          "type": "address"
        }
      ],
      "name": "initialize",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "petition",
      "outputs": [
        {
          "name": "",
          "type": "address"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [
        {
          "name": "_title",
          "type": "string"
        },
        {
          "name": "_descriptionHash",
          "type": "string"
        },
        {
          "name": "_expiration",
          "type": "uint256"
        },
        {
          "name": "_deposit",
          "type": "uint256"
        }
      ],
      "name": "create",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "escrow",
      "outputs": [
        {
          "name": "",
          "type": "address"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    }
  ],
  "source": "pragma solidity ^0.5.0;\n\nimport \"./Initializable.sol\";\nimport \"./Petition.sol\";\nimport \"./Escrow.sol\";\n\ncontract Controller is Initializable {\n    Escrow public escrow;\n    Petition public petition;\n\n    function initialize(address _escrow, address _petition) public initializer {\n        escrow = Escrow(_escrow);\n        petition = Petition(_petition);\n    }\n\n    function create(string memory _title,\n                    string memory _descriptionHash,\n                    uint256 _expiration,\n                    uint256 _deposit) public {\n        petition.create(_title, _descriptionHash, _expiration, _deposit, msg.sender);\n    }\n\n    function sign(uint256 _id) public payable {\n        petition.sign(_id, msg.sender);\n        escrow.deposit(msg.sender, msg.value);\n    }\n\n    function withdraw(uint256 _id) public payable {\n        bool canWithdraw = petition.canWithdraw(_id, msg.sender);\n        require(canWithdraw, \"Cannot widraw fund.\");\n\n        petition.markAsWithdraw(_id, msg.sender);\n        escrow.withdraw(msg.sender, msg.value);\n    }\n\n}",
  "sourcePath": "/Users/anthony/code/DappStack/dpetition/contracts/src/Controller.sol",
  "bytecode": "608060405234801561001057600080fd5b50610c49806100206000396000f3fe608060405260043610610072576000357c0100000000000000000000000000000000000000000000000000000000900480632e1a7d4d146100775780632fb1b25f146100a5578063485cc955146100d357806392d0bca414610144578063a20d99fc1461019b578063e2fdcc171461030e575b600080fd5b6100a36004803603602081101561008d57600080fd5b8101908080359060200190929190505050610365565b005b6100d1600480360360208110156100bb57600080fd5b810190808035906020019092919050505061069a565b005b3480156100df57600080fd5b50610142600480360360408110156100f657600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050610857565b005b34801561015057600080fd5b506101596109cd565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b3480156101a757600080fd5b5061030c600480360360808110156101be57600080fd5b81019080803590602001906401000000008111156101db57600080fd5b8201836020820111156101ed57600080fd5b8035906020019184600183028401116401000000008311171561020f57600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f8201169050808301925050505050505091929192908035906020019064010000000081111561027257600080fd5b82018360208201111561028457600080fd5b803590602001918460018302840111640100000000831117156102a657600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f82011690508083019250505050505050919291929080359060200190929190803590602001909291905050506109f3565b005b34801561031a57600080fd5b50610323610bb8565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b6000603460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16633ea01b5d83336040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808381526020018273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019250505060206040518083038186803b15801561042a57600080fd5b505afa15801561043e573d6000803e3d6000fd5b505050506040513d602081101561045457600080fd5b810190808051906020019092919050505090508015156104dc576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260138152602001807f43616e6e6f74207769647261772066756e642e0000000000000000000000000081525060200191505060405180910390fd5b603460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663db53b5fc83336040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808381526020018273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200192505050600060405180830381600087803b1580156105a157600080fd5b505af11580156105b5573d6000803e3d6000fd5b50505050603360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663f3fef3a333346040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200182815260200192505050600060405180830381600087803b15801561067e57600080fd5b505af1158015610692573d6000803e3d6000fd5b505050505050565b603460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16637cacde3f82336040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808381526020018273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200192505050600060405180830381600087803b15801561075f57600080fd5b505af1158015610773573d6000803e3d6000fd5b50505050603360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166347e7ef2433346040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200182815260200192505050600060405180830381600087803b15801561083c57600080fd5b505af1158015610850573d6000803e3d6000fd5b5050505050565b600060019054906101000a900460ff16806108765750610875610bde565b5b8061088d57506000809054906101000a900460ff16155b15156108e4576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252602e815260200180610bf0602e913960400191505060405180910390fd5b60008060019054906101000a900460ff1690506001600060016101000a81548160ff02191690831515021790555060016000806101000a81548160ff02191690831515021790555082603360006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555081603460006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555080600060016101000a81548160ff021916908315150217905550505050565b603460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b603460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16630b1b75a485858585336040518663ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004018080602001806020018681526020018581526020018473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001838103835288818151815260200191508051906020019080838360005b83811015610ae3578082015181840152602081019050610ac8565b50505050905090810190601f168015610b105780820380516001836020036101000a031916815260200191505b50838103825287818151815260200191508051906020019080838360005b83811015610b49578082015181840152602081019050610b2e565b50505050905090810190601f168015610b765780820380516001836020036101000a031916815260200191505b50975050505050505050600060405180830381600087803b158015610b9a57600080fd5b505af1158015610bae573d6000803e3d6000fd5b5050505050505050565b603360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600080303b9050600081149150509056fe436f6e747261637420696e7374616e63652068617320616c7265616479206265656e20696e697469616c697a6564a165627a7a72305820ac4ed735899e619a6620407c5075ee22b16162531994789d139ea9c8561cc3020029",
  "sourceMap": "104:953:0:-;;;;8:9:-1;5:2;;;30:1;27;20:12;5:2;104:953:0;;;;;;;",
  "deployedBytecode": "608060405260043610610072576000357c0100000000000000000000000000000000000000000000000000000000900480632e1a7d4d146100775780632fb1b25f146100a5578063485cc955146100d357806392d0bca414610144578063a20d99fc1461019b578063e2fdcc171461030e575b600080fd5b6100a36004803603602081101561008d57600080fd5b8101908080359060200190929190505050610365565b005b6100d1600480360360208110156100bb57600080fd5b810190808035906020019092919050505061069a565b005b3480156100df57600080fd5b50610142600480360360408110156100f657600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050610857565b005b34801561015057600080fd5b506101596109cd565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b3480156101a757600080fd5b5061030c600480360360808110156101be57600080fd5b81019080803590602001906401000000008111156101db57600080fd5b8201836020820111156101ed57600080fd5b8035906020019184600183028401116401000000008311171561020f57600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f8201169050808301925050505050505091929192908035906020019064010000000081111561027257600080fd5b82018360208201111561028457600080fd5b803590602001918460018302840111640100000000831117156102a657600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f82011690508083019250505050505050919291929080359060200190929190803590602001909291905050506109f3565b005b34801561031a57600080fd5b50610323610bb8565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b6000603460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16633ea01b5d83336040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808381526020018273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019250505060206040518083038186803b15801561042a57600080fd5b505afa15801561043e573d6000803e3d6000fd5b505050506040513d602081101561045457600080fd5b810190808051906020019092919050505090508015156104dc576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260138152602001807f43616e6e6f74207769647261772066756e642e0000000000000000000000000081525060200191505060405180910390fd5b603460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663db53b5fc83336040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808381526020018273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200192505050600060405180830381600087803b1580156105a157600080fd5b505af11580156105b5573d6000803e3d6000fd5b50505050603360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663f3fef3a333346040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200182815260200192505050600060405180830381600087803b15801561067e57600080fd5b505af1158015610692573d6000803e3d6000fd5b505050505050565b603460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16637cacde3f82336040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808381526020018273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200192505050600060405180830381600087803b15801561075f57600080fd5b505af1158015610773573d6000803e3d6000fd5b50505050603360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166347e7ef2433346040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200182815260200192505050600060405180830381600087803b15801561083c57600080fd5b505af1158015610850573d6000803e3d6000fd5b5050505050565b600060019054906101000a900460ff16806108765750610875610bde565b5b8061088d57506000809054906101000a900460ff16155b15156108e4576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252602e815260200180610bf0602e913960400191505060405180910390fd5b60008060019054906101000a900460ff1690506001600060016101000a81548160ff02191690831515021790555060016000806101000a81548160ff02191690831515021790555082603360006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555081603460006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555080600060016101000a81548160ff021916908315150217905550505050565b603460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b603460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16630b1b75a485858585336040518663ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004018080602001806020018681526020018581526020018473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001838103835288818151815260200191508051906020019080838360005b83811015610ae3578082015181840152602081019050610ac8565b50505050905090810190601f168015610b105780820380516001836020036101000a031916815260200191505b50838103825287818151815260200191508051906020019080838360005b83811015610b49578082015181840152602081019050610b2e565b50505050905090810190601f168015610b765780820380516001836020036101000a031916815260200191505b50975050505050505050600060405180830381600087803b158015610b9a57600080fd5b505af1158015610bae573d6000803e3d6000fd5b5050505050505050565b603360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600080303b9050600081149150509056fe436f6e747261637420696e7374616e63652068617320616c7265616479206265656e20696e697469616c697a6564a165627a7a72305820ac4ed735899e619a6620407c5075ee22b16162531994789d139ea9c8561cc3020029",
  "deployedSourceMap": "104:953:0:-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;783:271;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;783:271:0;;;;;;;;;;;;;;;;;:::i;:::-;;641:136;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;641:136:0;;;;;;;;;;;;;;;;;:::i;:::-;;204:156;;8:9:-1;5:2;;;30:1;27;20:12;5:2;204:156:0;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;204:156:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;173:24;;8:9:-1;5:2;;;30:1;27;20:12;5:2;173:24:0;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;366:269;;8:9:-1;5:2;;;30:1;27;20:12;5:2;366:269:0;;;;;;13:3:-1;8;5:12;2:2;;;30:1;27;20:12;2:2;366:269:0;;;;;;;;;;21:11:-1;8;5:28;2:2;;;46:1;43;36:12;2:2;366:269:0;;35:9:-1;28:4;12:14;8:25;5:40;2:2;;;58:1;55;48:12;2:2;366:269:0;;;;;;100:9:-1;95:1;81:12;77:20;67:8;63:35;60:50;39:11;25:12;22:29;11:107;8:2;;;131:1;128;121:12;8:2;366:269:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;30:3:-1;22:6;14;1:33;99:1;93:3;85:6;81:16;74:27;137:4;133:9;126:4;121:3;117:14;113:30;106:37;;169:3;161:6;157:16;147:26;;366:269:0;;;;;;;;;;;;;;;;;21:11:-1;8;5:28;2:2;;;46:1;43;36:12;2:2;366:269:0;;35:9:-1;28:4;12:14;8:25;5:40;2:2;;;58:1;55;48:12;2:2;366:269:0;;;;;;100:9:-1;95:1;81:12;77:20;67:8;63:35;60:50;39:11;25:12;22:29;11:107;8:2;;;131:1;128;121:12;8:2;366:269:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;30:3:-1;22:6;14;1:33;99:1;93:3;85:6;81:16;74:27;137:4;133:9;126:4;121:3;117:14;113:30;106:37;;169:3;161:6;157:16;147:26;;366:269:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;147:20;;8:9:-1;5:2;;;30:1;27;20:12;5:2;147:20:0;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;783:271;839:16;858:8;;;;;;;;;;;:20;;;879:3;884:10;858:37;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8:9:-1;5:2;;;30:1;27;20:12;5:2;858:37:0;;;;8:9:-1;5:2;;;45:16;42:1;39;24:38;77:16;74:1;67:27;5:2;858:37:0;;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;858:37:0;;;;;;;;;;;;;;;;839:56;;913:11;905:43;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;959:8;;;;;;;;;;;:23;;;983:3;988:10;959:40;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8:9:-1;5:2;;;30:1;27;20:12;5:2;959:40:0;;;;8:9:-1;5:2;;;45:16;42:1;39;24:38;77:16;74:1;67:27;5:2;959:40:0;;;;1009:6;;;;;;;;;;;:15;;;1025:10;1037:9;1009:38;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8:9:-1;5:2;;;30:1;27;20:12;5:2;1009:38:0;;;;8:9:-1;5:2;;;45:16;42:1;39;24:38;77:16;74:1;67:27;5:2;1009:38:0;;;;783:271;;:::o;641:136::-;693:8;;;;;;;;;;;:13;;;707:3;712:10;693:30;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8:9:-1;5:2;;;30:1;27;20:12;5:2;693:30:0;;;;8:9:-1;5:2;;;45:16;42:1;39;24:38;77:16;74:1;67:27;5:2;693:30:0;;;;733:6;;;;;;;;;;;:14;;;748:10;760:9;733:37;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8:9:-1;5:2;;;30:1;27;20:12;5:2;733:37:0;;;;8:9:-1;5:2;;;45:16;42:1;39;24:38;77:16;74:1;67:27;5:2;733:37:0;;;;641:136;:::o;204:156::-;1037:12:14;;;;;;;;;;;:31;;;;1053:15;:13;:15::i;:::-;1037:31;:47;;;;1073:11;;;;;;;;;;;1072:12;1037:47;1029:106;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;1146:20;1169:12;;;;;;;;;;;1146:35;;1206:4;1191:12;;:19;;;;;;;;;;;;;;;;;;1234:4;1220:11;;:18;;;;;;;;;;;;;;;;;;305:7:0;289:6;;:24;;;;;;;;;;;;;;;;;;343:9;323:8;;:30;;;;;;;;;;;;;;;;;;1276:15:14;1261:12;;:30;;;;;;;;;;;;;;;;;;204:156:0;;;:::o;173:24::-;;;;;;;;;;;;;:::o;366:269::-;552:8;;;;;;;;;;;:15;;;568:6;576:16;594:11;607:8;617:10;552:76;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;23:1:-1;8:100;33:3;30:1;27:10;8:100;;;99:1;94:3;90:11;84:18;80:1;75:3;71:11;64:39;52:2;49:1;45:10;40:15;;8:100;;;12:14;552:76:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;23:1:-1;8:100;33:3;30:1;27:10;8:100;;;99:1;94:3;90:11;84:18;80:1;75:3;71:11;64:39;52:2;49:1;45:10;40:15;;8:100;;;12:14;552:76:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8:9:-1;5:2;;;30:1;27;20:12;5:2;552:76:0;;;;8:9:-1;5:2;;;45:16;42:1;39;24:38;77:16;74:1;67:27;5:2;552:76:0;;;;366:269;;;;:::o;147:20::-;;;;;;;;;;;;;:::o;1388:501:14:-;1435:4;1800:10;1849:7;1837:20;1831:26;;1881:1;1875:2;:7;1868:14;;;1388:501;:::o"
}